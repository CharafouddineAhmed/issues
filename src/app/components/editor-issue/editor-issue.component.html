
<div class="row" >
    <form  [formGroup]="issueForm" novalidate >
        <ng-container *ngIf="viewOption; else templateB">

            <ng-container *ngIf="componentName !=='IssueDetailComponent'"> 
                <div class="mb-3">
                    <input class="form-control" type="text" placeholder="{{titre}}" aria-label="Disabled input example" disabled>
                </div>
            </ng-container>
           

            <div class="mb-3" >
                <div class="card border-secondary ">
                    <div class="card-header"><ul class="nav nav-tabs">
                        <li class="nav-item">
                        <a class="nav-link" aria-current="page" (click)="writeIssue()">Write</a>
                        </li>
                        <li class="nav-item">
                        <a class="nav-link active" (click)="previewIssue()">Preview</a>
                        </li>
                    </ul></div>
                    <div class="card-body text-secondary">
                        <div class="mb-3">
                            <markdown [data]="contenu"></markdown>
                        </div>
                    </div>
                </div>
            </div>
        </ng-container>
        <ng-template #templateB>

            <ng-container *ngIf="componentName !=='IssueDetailComponent'"> 
                <div class="mb-3">
                    <input type="text" class="form-control" aria-label="Small" placeholder="Title" formControlName="title" id="title" name="title" required>
                </div>
            </ng-container>
            
            <div class="mb-3" >
                <div class="card border-secondary ">
                    <div class="card-header"><ul class="nav nav-tabs">
                        <li class="nav-item">
                        <a class="nav-link active" aria-current="page" (click)="writeIssue()">Write</a>
                        </li>
                        <li class="nav-item">
                        <a class="nav-link" (click)="previewIssue()">Preview</a>
                        </li>
                    </ul></div>
                    <div class="card-body text-secondary">
                        <div class="mb-3">
                            <textarea class="form-control" id="content" rows="4" placeholder="Leave a comment" formControlName="content" name="content" ></textarea>
                            <div id="" class="form-text" *ngIf="issueForm.invalid && (issueForm.dirty || issueForm.touched)" >
                                The content or the title of the issue must have at least 1 character.
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </ng-template>

        <div class="">
            <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">

            <ng-container *ngIf="componentName !== 'NewIssueComponent' ">
                <div class="btn-group me-2" role="group" aria-label="First group">
                    <button type="button" (click)="closeCompletedIssue()" class="btn btn-sm btn-secondary">Close as completed</button>
                </div>
                <div class="btn-group me-2" role="group" aria-label="Second group">
                    <button type="button" class="btn btn-sm btn-secondary">Close as not planned</button>
                </div>
                <div class="btn-group me-2" role="group" aria-label="Second group">
                    <button type="button" class="btn btn-sm btn-secondary">Help by ChatGPT</button>
                </div>

                <div class="btn-group me-2" role="group" aria-label="First group">
                    <button type="button" (click)="addNewCommentInIssue()" class="btn btn-sm btn-success"  [disabled]="issueForm.invalid">Comment</button>
                </div>
                <div class="btn-group me-2" role="group" aria-label="Second group">
                    <button type="button" class="btn btn-sm btn-secondary" routerLink="/issues">List issues</button>
                </div>

            </ng-container>

            <ng-container *ngIf="componentName === 'NewIssueComponent' ">
                
                <div class="btn-group me-2" role="group" aria-label="First group">
                    <button type="button" (click)="addNewIssue()" class="btn btn-sm btn-success" [disabled]="issueForm.invalid">Submit new issue</button>
                </div>
                <div class="btn-group me-2" role="group" aria-label="Second group">
                    <button type="button" class="btn btn-sm btn-secondary" routerLink="/issues">List issues</button>
                </div>

            </ng-container>

            </div>
        </div>
    </form>
</div>






